<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>OFA GROUP 乗務記録・日常点検・運転日報</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, "Noto Sans JP", sans-serif;
      background: #e6f7ec;
      color: #222;
    }
    .wrapper {
      max-width: 640px;
      margin: 0 auto 80px;
      padding: 16px;
    }
    .card {
      background: #fff;
      border-radius: 24px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
      padding: 20px 18px 24px;
      margin-bottom: 16px;
    }
    .header-card {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #fff;
      text-align: left;
      position: relative;
      overflow: hidden;
    }
    .header-card::before {
      content: "";
      position: absolute;
      right: -60px;
      top: -60px;
      width: 160px;
      height: 160px;
      border-radius: 50%;
      border: 18px solid rgba(255,255,255,0.35);
    }
    .logo-box {
      width: 70px;
      height: 70px;
      border-radius: 20px;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      font-size: 26px;
      color: #222;
      margin-bottom: 12px;
    }
    .logo-box span:nth-child(1) { color: #f97316; } /* O: orange */
    .logo-box span:nth-child(2) { color: #22c55e; } /* F: green */
    .logo-box span:nth-child(3) { color: #3b82f6; } /* A: blue  */

    h1 {
      margin: 4px 0 6px;
      font-size: 18px;
      line-height: 1.4;
    }
    .subtitle {
      font-size: 11px;
      opacity: 0.9;
      margin-bottom: 4px;
    }
    .tagline {
      font-size: 11px;
      opacity: 0.9;
    }
    .tagline b { font-weight: 700; }

    .section-title {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      font-size: 15px;
      font-weight: 700;
    }
    .section-chip {
      background: #facc15;
      color: #111827;
      font-weight: 900;
      font-size: 11px;
      border-radius: 999px;
      padding: 4px 10px;
      margin-right: 8px;
    }
    .section-title small {
      font-weight: 500;
      font-size: 12px;
      color: #6b7280;
      margin-left: 4px;
    }
    .note {
      font-size: 11px;
      color: #6b7280;
      line-height: 1.5;
      margin-bottom: 12px;
    }

    label {
      display: block;
      font-size: 12px;
      font-weight: 600;
      margin: 12px 2px 4px;
    }
    label span.req {
      color: #ef4444;
      margin-left: 4px;
      font-weight: 700;
    }
    input[type="text"],
    input[type="email"],
    input[type="number"],
    input[type="time"],
    textarea,
    select {
      width: 100%;
      border-radius: 12px;
      border: 1px solid #d1d5db;
      padding: 10px 12px;
      font-size: 14px;
      outline: none;
      transition: border-color 0.15s, box-shadow 0.15s;
      background: #f9fafb;
    }
    input:focus,
    textarea:focus,
    select:focus {
      border-color: #22c55e;
      box-shadow: 0 0 0 1px rgba(34,197,94,0.35);
      background: #fff;
    }
    textarea {
      min-height: 72px;
      resize: vertical;
    }
    .help {
      font-size: 11px;
      color: #9ca3af;
      margin-top: 2px;
    }

    .radio-group,
    .check-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 4px;
    }
    .pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 6px 14px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      font-size: 12px;
      background: #f9fafb;
      cursor: pointer;
      user-select: none;
    }
    .pill input {
      display: none;
    }
    .pill.selected {
      background: #22c55e;
      color: #fff;
      border-color: #16a34a;
      font-weight: 600;
    }

    .two-col {
      display: flex;
      gap: 8px;
    }
    .two-col > div { flex: 1; }

    .section-footer-note {
      font-size: 11px;
      color: #6b7280;
      margin-top: 4px;
    }

    .submit-btn {
      width: 100%;
      border: none;
      border-radius: 999px;
      padding: 16px 12px;
      font-size: 16px;
      font-weight: 800;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #fff;
      box-shadow: 0 10px 20px rgba(16,185,129,0.4);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 12px;
    }
    .submit-btn span.icon {
      font-size: 18px;
    }
    .submit-btn:disabled {
      background: #9ca3af;
      box-shadow: none;
      cursor: not-allowed;
    }

    .status-message {
      margin-top: 10px;
      font-size: 13px;
      line-height: 1.5;
    }
    .status-success {
      color: #16a34a;
    }
    .status-error {
      color: #dc2626;
    }

    @media (max-width: 480px) {
      .header-card {
        padding-top: 16px;
      }
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <!-- ヘッダー -->
    <div class="card header-card">
      <div class="logo-box">
        <span>O</span><span>F</span><span>A</span>
      </div>
      <div class="subtitle">OFA GROUP WEB点呼 ＆ 日報フォーム</div>
      <h1>乗務記録・日常点検・運転日報</h1>
      <div class="tagline">
        <b>ONE FOR ALL, ALL FOR ONE</b><br />
        安全運転・コンプライアンスを守るための<br />
        OFA GROUP ドライバー専用フォームです。
      </div>
    </div>

    <!-- 01 基本情報 -->
    <div class="card">
      <div class="section-title">
        <div class="section-chip">01 基本情報</div>
        <span>本日の情報を入力してください</span>
      </div>
      <div class="note">
        ※ 日付は自動で本日が入ります。<br />
        ※ メンバーシップLINEなどからアクセスして、毎日「出発前」に入力してください。
      </div>

      <label>日付 <span class="req">必須</span></label>
      <input type="text" id="date" readonly />

      <label>ドライバー名 <span class="req">必須</span></label>
      <input type="text" id="driverName" placeholder="山田 太郎 など" />

      <label>所属会社 <span class="req">必須</span></label>
      <input type="text" id="company" placeholder="株式会社OFA など" />

      <label>本日の主な案件（荷主・現場名） <span class="req">必須</span></label>
      <input type="text" id="client" placeholder="Amazon / ヤマト / 佐川 / 日本郵便 など" />

      <label>エリア <span class="req">必須</span></label>
      <input type="text" id="area" placeholder="鹿児島市〇〇 / 熊本市〇〇 など" />

      <label>出庫ベース（担当拠点） <span class="req">必須</span></label>
      <input type="text" id="base" placeholder="伊敷営業所 / 〇〇デポ など" />

      <label>出庫場所（駐車場・センターなど） <span class="req">必須</span></label>
      <input type="text" id="startPlace" placeholder="鹿児島市〇〇駐車場 など" />

      <label>メールアドレス（控え送信用）</label>
      <input type="email" id="email" placeholder="example@ofa-group.jp" />
      <div class="help">※ 入力すると、点呼結果のコピーが届きます。</div>
    </div>

    <!-- 02 出発前入力 -->
    <div class="card">
      <div class="section-title">
        <div class="section-chip">02 出発前入力</div>
        <span>出勤前〜出発時の状態を記録</span>
      </div>

      <div class="two-col">
        <div>
          <label>出勤時間</label>
          <input type="time" id="workTime" />
        </div>
        <div>
          <label>出発時間</label>
          <input type="time" id="startTime" />
        </div>
      </div>

      <label>体調</label>
      <div class="radio-group" data-name="condition">
        <label class="pill"><input type="radio" name="condition" value="良好">良好</label>
        <label class="pill"><input type="radio" name="condition" value="普通">普通</label>
        <label class="pill"><input type="radio" name="condition" value="不良">不良</label>
      </div>

      <label>前日睡眠時間（h）</label>
      <input type="number" step="0.1" id="sleep" placeholder="例：6.5" />

      <label>飲酒（過去24h）</label>
      <div class="radio-group" data-name="drink">
        <label class="pill"><input type="radio" name="drink" value="なし">なし</label>
        <label class="pill"><input type="radio" name="drink" value="あり">あり</label>
      </div>

      <label>服薬</label>
      <div class="radio-group" data-name="medicine">
        <label class="pill"><input type="radio" name="medicine" value="なし">なし</label>
        <label class="pill"><input type="radio" name="medicine" value="あり">あり</label>
      </div>

      <label>体温（℃）</label>
      <input type="number" step="0.1" id="temp" placeholder="例：36.5" />

      <label>アルコール検知器（mg/L）</label>
      <input type="number" step="0.01" id="alcoholValue" placeholder="0.00" />

      <label>出発前メーター（km）</label>
      <input type="number" step="0.1" id="startMeter" placeholder="例：47772" />

      <label>運転免許証アップロードURL</label>
      <input type="text" id="licenseImg" placeholder="免許証写真をアップしたURLを貼り付け" />
      <div class="help">※ 今はURL貼付け式です。（後でDrive連携も拡張可能）</div>

      <label>メモ・注意事項</label>
      <textarea id="memo" placeholder="体調・車両の気になる点・当日の注意事項など"></textarea>
    </div>

    <!-- 03 日常点検 -->
    <div class="card">
      <div class="section-title">
        <div class="section-chip">03 日常点検</div>
        <span>出発前の日常点検を入力</span>
      </div>
      <div class="note">
        ○：問題なし ／ △：要確認 ／ ×：要整備 の3段階で入力してください。
      </div>

      <label>ブレーキ</label>
      <div class="radio-group" data-name="check_brake">
        <label class="pill"><input type="radio" name="check_brake" value="○">○</label>
        <label class="pill"><input type="radio" name="check_brake" value="△">△</label>
        <label class="pill"><input type="radio" name="check_brake" value="×">×</label>
      </div>

      <label>タイヤ（亀裂・摩耗・空気圧）</label>
      <div class="radio-group" data-name="check_tire">
        <label class="pill"><input type="radio" name="check_tire" value="○">○</label>
        <label class="pill"><input type="radio" name="check_tire" value="△">△</label>
        <label class="pill"><input type="radio" name="check_tire" value="×">×</label>
      </div>

      <label>灯火類（ヘッドライト・ブレーキランプ等）</label>
      <div class="radio-group" data-name="check_light">
        <label class="pill"><input type="radio" name="check_light" value="○">○</label>
        <label class="pill"><input type="radio" name="check_light" value="△">△</label>
        <label class="pill"><input type="radio" name="check_light" value="×">×</label>
      </div>

      <label>バックカメラ・ミラー類</label>
      <div class="radio-group" data-name="check_camera">
        <label class="pill"><input type="radio" name="check_camera" value="○">○</label>
        <label class="pill"><input type="radio" name="check_camera" value="△">△</label>
        <label class="pill"><input type="radio" name="check_camera" value="×">×</label>
      </div>

      <label>車体外観（傷・凹み・汚れ等）</label>
      <div class="radio-group" data-name="check_body">
        <label class="pill"><input type="radio" name="check_body" value="○">○</label>
        <label class="pill"><input type="radio" name="check_body" value="△">△</label>
        <label class="pill"><input type="radio" name="check_body" value="×">×</label>
      </div>

      <label>その他（オイル・水回り・積載物固定など）</label>
      <div class="radio-group" data-name="check_other">
        <label class="pill"><input type="radio" name="check_other" value="○">○</label>
        <label class="pill"><input type="radio" name="check_other" value="△">△</label>
        <label class="pill"><input type="radio" name="check_other" value="×">×</label>
      </div>

      <label>点検メモ</label>
      <textarea id="check_note" placeholder="気になる箇所・交換予定・整備予約など"></textarea>
    </div>

    <!-- 04 帰庫後入力 -->
    <div class="card">
      <div class="section-title">
        <div class="section-chip">04 帰庫後入力</div>
        <span>業務終了時に入力してください</span>
      </div>
      <div class="note">
        一日の運行が終わったら、帰庫後の情報を入力してから送信してください。
      </div>

      <label>帰庫場所</label>
      <input type="text" id="returnPlace" placeholder="鹿児島市〇〇駐車場 など" />

      <div class="two-col">
        <div>
          <label>帰庫時間</label>
          <input type="time" id="returnTime" />
        </div>
        <div>
          <label>帰庫メーター（km）</label>
          <input type="number" step="0.1" id="returnMeter" placeholder="例：48210" />
        </div>
      </div>

      <label>走行距離（km）</label>
      <input type="number" step="0.1" id="distance" placeholder="※ 分かる場合は入力" />

      <label>休憩時間・休憩場所</label>
      <input type="text" id="rest" placeholder="例：合計1h / SA・コンビニなど" />

      <label>代金入金状況</label>
      <div class="radio-group" data-name="codStatus">
        <label class="pill"><input type="radio" name="codStatus" value="対象なし">対象なし</label>
        <label class="pill"><input type="radio" name="codStatus" value="入金済">入金済</label>
        <label class="pill"><input type="radio" name="codStatus" value="未入金">未入金</label>
      </div>

      <label>代金入金金額（円）</label>
      <input type="number" step="1" id="codAmount" placeholder="例：12500" />

      <label>道路・運行状況（遅延・事故・渋滞など）</label>
      <textarea id="roadStatus" placeholder="異常なしの場合は『異常なし』と入力"></textarea>

      <label>異常の詳細（あれば）</label>
      <textarea id="abnormalDetail" placeholder="事故・物損・クレームなどの概要と対応"></textarea>

      <div class="section-footer-note">
        ※ 入力後、「OFA GROUP Web点呼を送信する」を押すと、本部と本人（メール入力時）へ控えが送信されます。
      </div>

      <button id="submitBtn" class="submit-btn">
        <span class="icon">✅</span>
        <span>OFA GROUP Web点呼を送信する</span>
      </button>
      <div id="status" class="status-message"></div>
    </div>
  </div>

  <script>
    // ★★ ここをあなたの Apps Script exec URL に変えてください ★★
    // 例）const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxxxxx/exec';
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwLfEkPddQsP6B8VKKkHkEB3QTVWGDJxW0KqMTV2R3dxAuw72s-9rVmWcW_UK8k082e/exec';

    // 日付を自動セット（YYYY/MM/DD）
    (function setToday() {
      const d = new Date();
      const y = d.getFullYear();
      const m = ('0' + (d.getMonth() + 1)).slice(-2);
      const day = ('0' + d.getDate()).slice(-2);
      document.getElementById('date').value = `${y}/${m}/${day}`;
    })();

    // pill選択の見た目切替
    document.querySelectorAll('.radio-group').forEach(group => {
      group.addEventListener('click', e => {
        const label = e.target.closest('.pill');
        if (!label) return;
        const input = label.querySelector('input[type="radio"]');
        if (!input) return;

        const name = input.name;
        document.querySelectorAll('input[name="' + name + '"]').forEach(r => {
          const l = r.closest('.pill');
          l.classList.remove('selected');
        });
        input.checked = true;
        label.classList.add('selected');
      });
    });

    function getRadioValue(name) {
      const r = document.querySelector('input[name="' + name + '"]:checked');
      return r ? r.value : '';
    }

    document.getElementById('submitBtn').addEventListener('click', async () => {
      const btn = document.getElementById('submitBtn');
      const status = document.getElementById('status');
      status.textContent = '';
      status.className = 'status-message';

      // 簡易必須チェック（最低限）
      const requiredIds = ['driverName', 'company', 'client', 'area', 'base', 'startPlace'];
      for (const id of requiredIds) {
        const el = document.getElementById(id);
        if (!el.value.trim()) {
          status.textContent = '未入力の必須項目があります：' + id;
          status.classList.add('status-error');
          el.focus();
          return;
        }
      }

      btn.disabled = true;
      btn.innerHTML = '<span class="icon">⏳</span><span>送信中です…</span>';

      const payload = {
        date: document.getElementById('date').value,
        driverName: document.getElementById('driverName').value.trim(),
        company: document.getElementById('company').value.trim(),
        client: document.getElementById('client').value.trim(),
        area: document.getElementById('area').value.trim(),
        base: document.getElementById('base').value.trim(),
        startPlace: document.getElementById('startPlace').value.trim(),
        email: document.getElementById('email').value.trim(),

        workTime: document.getElementById('workTime').value,
        startTime: document.getElementById('startTime').value,
        condition: getRadioValue('condition'),
        sleep: document.getElementById('sleep').value,
        drink: getRadioValue('drink'),
        medicine: getRadioValue('medicine'),
        temp: document.getElementById('temp').value,
        alcoholValue: document.getElementById('alcoholValue').value,
        startMeter: document.getElementById('startMeter').value,
        licenseImg: document.getElementById('licenseImg').value,
        memo: document.getElementById('memo').value,

        check_brake: getRadioValue('check_brake'),
        check_tire: getRadioValue('check_tire'),
        check_light: getRadioValue('check_light'),
        check_camera: getRadioValue('check_camera'),
        check_body: getRadioValue('check_body'),
        check_other: getRadioValue('check_other'),
        check_note: document.getElementById('check_note').value,

        returnPlace: document.getElementById('returnPlace').value.trim(),
        returnTime: document.getElementById('returnTime').value,
        returnMeter: document.getElementById('returnMeter').value,
        distance: document.getElementById('distance').value,
        rest: document.getElementById('rest').value,
        codStatus: getRadioValue('codStatus'),
        codAmount: document.getElementById('codAmount').value,
        roadStatus: document.getElementById('roadStatus').value,
        abnormalDetail: document.getElementById('abnormalDetail').value
      };

      try {
        const res = await fetch(SCRIPT_URL, {
          method: 'POST',
          mode: 'no-cors',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ contents: payload })
        });

        // no-cors のためレスポンスは見えないが、送信完了とみなす
        status.textContent = '送信しました。お疲れ様でした！';
        status.classList.add('status-success');
      } catch (err) {
        status.textContent = '送信エラーが発生しました。電波状況を確認して、再度お試しください。';
        status.classList.add('status-error');
      } finally {
        btn.disabled = false;
        btn.innerHTML = '<span class="icon">✅</span><span>OFA GROUP Web点呼を送信する</span>';
      }
    });
  </script>
</body>
</html>
