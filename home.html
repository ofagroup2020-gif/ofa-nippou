<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>OFA 点呼システム | トップ</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="brandRow">
        <div class="logo"></div>
        <div>
          <div class="appTitle">OFA 点呼システム</div>
          <div class="appSub">出発点呼 / 帰着点呼・日報 / PDF・月報・CSV</div>
        </div>
        <div class="badge" id="roleBadge">---</div>
      </div>

      <div class="grid grid2">
        <a class="btn rainbow" href="./departure.html">✅ 業務開始（出発点呼）</a>
        <a class="btn rainbow" href="./arrival.html">✅ 業務終了（帰着点呼 / 日報）</a>
      </div>

      <a class="btn dark" href="./my.html">📄 自分のPDF / CSV（本人用）</a>

      <div id="adminArea" class="adminBox hidden">
        <div class="titleSm">管理者メニュー</div>
        <a class="btn ghost" href="./admin.html">🔍 全員検索 / PDF / CSV / 月報</a>
      </div>

      <button class="btn ghost" id="logoutBtn" type="button">ログアウト</button>

      <div class="toast" id="toast"></div>
    </div>
  </div>

  <script src="./config.js"></script>
  <script src="./common.js"></script>
  <script>
    requireLogin();

    const role = sessionStorage.getItem('ofa_role');
    document.getElementById('roleBadge').textContent = role === 'admin' ? '管理者' : 'ドライバー';
    if(role === 'admin') document.getElementById('adminArea').classList.remove('hidden');

    document.getElementById('logoutBtn').addEventListener('click', ()=>{
      sessionStorage.clear();
      location.href = './index.html';
    });
  </script>
</body>
</html>
