<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>OFA GROUP｜点呼ポータル</title>
  <link rel="stylesheet" href="./style.css" />

  <!-- ✅ Google Identity Services -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body data-page="index">
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="t">OFA GROUP｜点呼ポータル</div>
        <div class="s">出発点呼 / 帰着点呼・日報 / 日報PDF・月報PDF・CSV / 管理者検索</div>
      </div>
      <div class="pills">
        <div class="badge" id="loginBadge"><span class="dot ng"></span>未ログイン</div>
        <button class="btn small" id="btnLogout" style="display:none;">ログアウト</button>
      </div>
    </div>

    <div class="grid">
      <div class="card half">
        <div class="cardTitle">
          <span>ログイン（Gmail）</span>
          <span class="pill">自動ログイン対応</span>
        </div>
        <p class="cardSub">
          ドライバーはログイン後、本人の点呼データだけ送信・出力できます。<br>
          管理者は adminKey で全データ検索・出力が可能です。
        </p>

        <div class="note">
          現在：<b id="loginMail">ログインしてください</b>
        </div>

        <!-- ▼ Googleログインボタン（未ログイン時に表示） -->
        <div id="loginButtonWrap" style="margin-top:10px;">
          <div id="g_id_onload"
            data-client_id="YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com"
            data-callback="onGoogleCredential"
            data-auto_select="true"
            data-itp_support="true">
          </div>
          <div class="g_id_signin"
            data-type="standard"
            data-size="large"
            data-theme="outline"
            data-text="signin_with"
            data-shape="pill"
            data-logo_alignment="left">
          </div>

          <div class="note" style="margin-top:10px;">
            ※Google CloudでOAuth Client IDを作成し、GitHub PagesのURLを許可してください。
          </div>
        </div>

        <div class="hr"></div>

        <label>管理者パスワード（adminKey）</label>
        <input id="adminKey" type="password" placeholder="管理者のみ入力（保存されます）" />
        <div class="note" style="margin-top:10px;">
          管理者は adminKey を入れると「全データ検索/全出力」が使えます。
        </div>
      </div>

      <div class="card half">
        <div class="cardTitle">
          <span>メニュー</span>
          <span class="pill">白背景＋OFAポップ</span>
        </div>
        <p class="cardSub">ボタンは虹グラ枠・OFAイエローを採用。Instagramのようにカラー重視。</p>

        <div class="pills" style="margin-top:10px;">
          <button class="btn primary" onclick="location.href='departure.html'">出発点呼</button>
          <button class="btn rain" onclick="location.href='arrival.html'">帰着点呼 / 日報</button>
          <button class="btn" onclick="location.href='export.html'">日報 / 月報 / CSV</button>
          <button class="btn ghost" onclick="location.href='admin.html'">管理者（検索）</button>
        </div>

        <div class="hr"></div>

        <div class="note">
          ・送信するとGASが Drive と スプレッドシートに保存します。<br>
          ・日報PDFは「点呼全内容」出力（LINE転送用にそのまま記載）。<br>
          ・月報PDFは「詳細版」で日別に出発/帰着の入力内容を記載＋集計。<br>
          ・CSVは「月」または「日付範囲」で出力可能。
        </div>
      </div>
    </div>

    <div class="card" style="margin-top:12px;">
      <div class="cardTitle">
        <span>よくあるエラー</span>
        <span class="pill">対策込み</span>
      </div>
      <div class="note">
        ✅ ボタンが反応しない → “未ログイン” が原因のことが多いです（まずGmailログイン）。<br>
        ✅ PDFが空 → 点呼/日報の入力→送信が完了しているか確認（帰着で日報項目を入力）。<br>
        ✅ iPhoneで別タブが開かない → Safari設定/ポップアップ許可、またはリンクをコピーして開く。
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script src="./app.js"></script>
</body>
</html>
