<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>OFA | ログイン</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body data-page="login">
  <div class="wrap">
    <div class="card rainbow-border">
      <div style="display:flex;gap:10px;align-items:center;margin-bottom:10px;">
        <div class="logo"></div>
        <div>
          <div class="title">OFA 点呼システム</div>
          <div class="subtitle">ログイン必須（ドライバー / 管理者）</div>
        </div>
      </div>

      <div class="notice">
        <b>🔐 ログインしてから利用してください</b><br>
        一般ドライバー：パス <b>202601</b><br>
        管理者：パス <b>ofa-2026</b>
      </div>

      <hr class="sep">

      <div class="titleSm">一般ドライバー</div>
      <label>氏名（本名）<span class="req">*</span></label>
      <input id="driverName" type="text" placeholder="例：森下 洸" />

      <label>ログインパス<span class="req">*</span></label>
      <input id="driverPass" type="password" placeholder="202601" />

      <div class="btnrow">
        <button class="btn rainbow" id="driverLoginBtn" type="button">ドライバーとしてログイン</button>
      </div>

      <hr class="sep">

      <div class="titleSm">管理者</div>
      <label>管理パス<span class="req">*</span></label>
      <input id="adminPass" type="password" placeholder="ofa-2026" />

      <div class="btnrow">
        <button class="btn primary" id="adminLoginBtn" type="button">管理者としてログイン</button>
      </div>

      <small class="hint">
        ※ログイン情報は端末内（localStorage）に保存されます。共有端末はログアウト推奨。
      </small>

      <div class="btnrow">
        <button class="btn ghost" id="logoutBtn" type="button">ログアウト（全解除）</button>
      </div>

    </div>
  </div>

  <div class="toast" id="toast"></div>
  <script src="./auth.js"></script>
  <script>
    const $ = (id)=>document.getElementById(id);
    function toast(msg, ok=false){
      const el = $("toast"); if(!el){ alert(msg); return; }
      el.textContent = msg;
      el.className = "toast " + (ok ? "ok":"ng");
      el.style.display = "block";
      setTimeout(()=> el.style.display="none", 2400);
    }

    $("driverLoginBtn").addEventListener("click", ()=>{
      const name = ($("driverName").value||"").trim();
      const pass = ($("driverPass").value||"").trim();
      if(!name){ toast("氏名（本名）を入力してください"); return; }
      if(!loginDriver(name, pass)){ toast("ドライバーパスが違います"); return; }
      toast("ログインOK", true);
      setTimeout(()=> location.href="./index.html", 400);
    });

    $("adminLoginBtn").addEventListener("click", ()=>{
      const pass = ($("adminPass").value||"").trim();
      if(!loginAdmin(pass)){ toast("管理パスが違います"); return; }
      toast("管理者ログインOK", true);
      setTimeout(()=> location.href="./index.html", 400);
    });

    $("logoutBtn").addEventListener("click", ()=>{
      logoutAll();
      toast("ログアウトしました", true);
    });
  </script>
</body>
</html>
