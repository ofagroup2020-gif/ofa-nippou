<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>OFA | 帰着点呼 / 日報</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body data-page="arrival">
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo">OFA</div>
        <div>
          <div class="title">業務終了（帰着点呼 / 日報）</div>
          <div class="subtitle">日報はPDFで提出（写真は日報のみ）</div>
        </div>
      </div>
      <button class="btn ghost small" id="backBtn" type="button">戻る</button>
    </div>

    <div class="card rainbow-border">
      <div class="badge"><span class="dot ok" id="authDot"></span><span id="authState">ログイン中</span></div>

      <div class="err" id="errBox"></div>
      <div class="okmsg" id="okBox"></div>

      <hr class="sep">

      <!-- 基本 -->
      <div class="grid grid2">
        <div>
          <label>点呼区分 <span class="req">*</span></label>
          <input value="帰着" readonly />
        </div>
        <div>
          <label>点呼日時（自動）</label>
          <input id="datetime" readonly />
        </div>
      </div>

      <div class="grid grid2">
        <div>
          <label>氏名（本名） <span class="req">*</span></label>
          <input id="driverName" type="text" placeholder="例：森下 洸" />
        </div>
        <div>
          <label>事業者/拠点 <span class="req">*</span></label>
          <select id="base"></select>
        </div>
      </div>

      <div class="grid grid2">
        <div>
          <label>車両番号（ナンバー） <span class="req">*</span></label>
          <input id="vehicleNo" type="text" placeholder="例：鹿児島 480 れ 12-34" />
        </div>
        <div>
          <label>点呼実施方法 <span class="req">*</span></label>
          <select id="method">
            <option value="">選択</option>
            <option>対面</option>
            <option>電話</option>
            <option>アプリ</option>
            <option>その他</option>
          </select>
        </div>
      </div>

      <div class="grid grid3">
        <div>
          <label>出発ODO <span class="req">*</span></label>
          <input id="odoStart" inputmode="numeric" placeholder="例：12345" />
        </div>
        <div>
          <label>帰着ODO <span class="req">*</span></label>
          <input id="odoEnd" inputmode="numeric" placeholder="例：12500" />
        </div>
        <div>
          <label>走行距離（自動）</label>
          <input id="odoDiff" readonly placeholder="自動" />
        </div>
      </div>

      <hr class="sep">

      <!-- 健康・状態（帰着も必須） -->
      <div class="grid grid3">
        <div>
          <label>睡眠時間(h) <span class="req">*</span></label>
          <input id="sleepHours" type="number" step="0.5" min="0" max="24" placeholder="例：6.0" />
        </div>
        <div>
          <label>体温(℃) <span class="req">*</span></label>
          <input id="temp" type="number" step="0.1" min="30" max="45" placeholder="例：36.7" />
        </div>
        <div>
          <label>体調 <span class="req">*</span></label>
          <select id="condition">
            <option value="">選択</option>
            <option>良好</option>
            <option>注意</option>
            <option>不良</option>
          </select>
        </div>
      </div>

      <div class="grid grid3">
        <div>
          <label>疲労 <span class="req">*</span></label>
          <select id="fatigue">
            <option value="">選択</option>
            <option>なし</option>
            <option>少し</option>
            <option>強い</option>
          </select>
        </div>
        <div>
          <label>服薬/体調影響 <span class="req">*</span></label>
          <select id="medicine">
            <option value="">選択</option>
            <option>なし</option>
            <option>あり</option>
          </select>
        </div>
        <div>
          <label>服薬内容（ありの場合必須）</label>
          <input id="medicineNote" type="text" placeholder="例：頭痛薬" />
        </div>
      </div>

      <div class="grid grid3">
        <div>
          <label>飲酒の有無 <span class="req">*</span></label>
          <select id="drink">
            <option value="">選択</option>
            <option>なし</option>
            <option>あり</option>
          </select>
        </div>
        <div>
          <label>酒気帯び <span class="req">*</span></label>
          <select id="alcoholBand">
            <option value="">選択</option>
            <option>なし</option>
            <option>疑い</option>
            <option>あり</option>
          </select>
        </div>
        <div>
          <label>アルコール数値 <span class="req">*</span></label>
          <input id="alcoholValue" type="number" step="0.01" min="0" placeholder="例：0.00" />
        </div>
      </div>

      <label>アルコール測定写真（任意・推奨）</label>
      <input id="alcoholPhoto" type="file" accept="image/*" />

      <hr class="sep">

      <!-- 免許 -->
      <div class="grid grid2">
        <div>
          <label>免許証番号 <span class="req">*</span></label>
          <input id="licenseNo" type="text" placeholder="例：第1234567890号" />
        </div>
        <div>
          <label>免許証写真（任意）</label>
          <input id="licensePhoto" type="file" accept="image/*" />
        </div>
      </div>

      <hr class="sep">

      <!-- 業務 -->
      <label>稼働案件（複数可） <span class="req">*</span></label>
      <div id="jobsBox"></div>

      <div class="grid grid2">
        <div>
          <label>積込拠点/エリア <span class="req">*</span></label>
          <input id="loadArea" type="text" placeholder="例：Amazon鹿児島" />
        </div>
        <div>
          <label>危険物・高額品 <span class="req">*</span></label>
          <select id="danger">
            <option value="">選択</option>
            <option>なし</option>
            <option>あり</option>
          </select>
        </div>
      </div>

      <hr class="sep">

      <!-- 異常申告 -->
      <div class="grid grid2">
        <div>
          <label>異常の有無 <span class="req">*</span></label>
          <select id="abnormal">
            <option value="">選択</option>
            <option>なし</option>
            <option>あり</option>
          </select>
        </div>
        <div>
          <label>異常内容（ありの場合必須）</label>
          <input id="abnormalNote" type="text" placeholder="例：ライト球切れ" />
        </div>
      </div>
      <label>異常写真（任意・推奨）</label>
      <input id="abnormalPhoto" type="file" accept="image/*" />

      <hr class="sep">

      <!-- 日常点検（フル） -->
      <div class="notice"><b>日常点検（車両点検）</b>：全項目必須（OK/NG）｜NGは詳細必須</div>

      <div class="grid grid3">
        <div><label>タイヤ空気圧 <span class="req">*</span></label><select id="chk_tirePressure"><option value="">選択</option><option>OK</option><option>NG</option></select></div>
        <div><label>タイヤ溝/ひび割れ <span class="req">*</span></label><select id="chk_tireTread"><option value="">選択</option><option>OK</option><option>NG</option></select></div>
        <div><label>ホイールナット緩み <span class="req">*</span></label><select id="chk_wheelNut"><option value="">選択</option><option>OK</option><option>NG</option></select></div>

        <div><label>ブレーキ効き <span class="req">*</span></label><select id="chk_brake"><option value="">選択</option><option>OK</option><option>NG</option></select></div>
        <div><label>パーキングブレーキ <span class="req">*</span></label><select id="chk_parking"><option value="">選択</option><option>OK</option><option>NG</option></select></div>
        <div><label>ハンドル操作 <span class="req">*</span></label><select id="chk_handle"><option value="">選択</option><option>OK</option><option>NG</option></select></div>

        <div><label>ライト類 <span class="req">*</span></label><select id="chk_lights"><option value="">選択</option><option>OK</option><option>NG</option></select></div>
        <div><label>ワイパー/ウォッシャー <span class="req">*</span></label><select id="chk_wiper"><option value="">選択</option><option>OK</option><option>NG</option></select></div>
        <div><label>ミラー/ガラス破損 <span class="req">*</span></label><select id="chk_glass"><option value="">選択</option><option>OK</option><option>NG</option></select></div>

        <div><label>エンジンオイル量 <span class="req">*</span></label><select id="chk_oil"><option value="">選択</option><option>OK</option><option>NG</option></select></div>
        <div><label>冷却水 <span class="req">*</span></label><select id="chk_coolant"><option value="">選択</option><option>OK</option><option>NG</option></select></div>
        <div><label>バッテリー（警告灯含む） <span class="req">*</span></label><select id="chk_battery"><option value="">選択</option><option>OK</option><option>NG</option></select></div>

        <div><label>異音/異臭/振動 <span class="req">*</span></label><select id="chk_noise"><option value="">選択</option><option>OK</option><option>NG</option></select></div>
        <div><label>漏れ（油/冷却水） <span class="req">*</span></label><select id="chk_leak"><option value="">選択</option><option>OK</option><option>NG</option></select></div>
        <div><label>外装破損 <span class="req">*</span></label><select id="chk_damage"><option value="">選択</option><option>OK</option><option>NG</option></select></div>

        <div><label>積載状態（偏り/過積載なし） <span class="req">*</span></label><select id="chk_load"><option value="">選択</option><option>OK</option><option>NG</option></select></div>
        <div><label>消火器 <span class="req">*</span></label><select id="chk_ext"><option value="">選択</option><option>OK</option><option>NG</option></select></div>
        <div><label>三角停止板 <span class="req">*</span></label><select id="chk_triangle"><option value="">選択</option><option>OK</option><option>NG</option></select></div>

        <div><label>反射ベスト <span class="req">*</span></label><select id="chk_vest"><option value="">選択</option><option>OK</option><option>NG</option></select></div>
        <div><label>ジャッキ/工具（任意）</label><select id="chk_tools"><option value="">選択</option><option>OK</option><option>NG</option></select></div>
      </div>

      <label>NG詳細メモ（NGが1つでもあれば必須）</label>
      <textarea id="checkNote" placeholder="NGの場合は必ず詳細（例：右前タイヤ空気圧低下）"></textarea>

      <label>NG写真（NG時 推奨）</label>
      <input id="checkPhoto" type="file" accept="image/*" multiple />

      <hr class="sep">

      <!-- 日報（最重要） -->
      <div class="notice"><b>日報（業務実績）</b>：ここが一番重要（必須あり）</div>

      <div class="grid grid3">
        <div>
          <label>稼働時間（開始） <span class="req">*</span></label>
          <input id="workStart" type="time" />
        </div>
        <div>
          <label>稼働時間（終了） <span class="req">*</span></label>
          <input id="workEnd" type="time" />
        </div>
        <div>
          <label>休憩時間（分） <span class="req">*</span></label>
          <input id="breakMin" type="number" min="0" step="1" placeholder="例：60" />
        </div>
      </div>

      <div class="grid grid3">
        <div>
          <label>配達個数 <span class="req">*</span></label>
          <input id="deliveryCount" type="number" min="0" step="1" placeholder="例：180" />
        </div>
        <div>
          <label>不在数</label>
          <input id="absentCount" type="number" min="0" step="1" placeholder="例：12" />
        </div>
        <div>
          <label>再配達数</label>
          <input id="redeliveryCount" type="number" min="0" step="1" placeholder="例：8" />
        </div>
      </div>

      <div class="grid grid3">
        <div>
          <label>返品/持戻り</label>
          <input id="returnCount" type="number" min="0" step="1" placeholder="例：1" />
        </div>
        <div>
          <label>クレーム <span class="req">*</span></label>
          <select id="complaint">
            <option value="">選択</option>
            <option>なし</option>
            <option>あり</option>
          </select>
        </div>
        <div>
          <label>クレーム内容（ありの場合必須）</label>
          <input id="complaintNote" type="text" placeholder="例：置き配場所違い" />
        </div>
      </div>

      <hr class="sep">

      <div class="grid grid3">
        <div>
          <label>日当（固定報酬） <span class="req">*</span></label>
          <input id="payBase" type="number" min="0" step="1" placeholder="例：16000" />
        </div>
        <div>
          <label>インセンティブ</label>
          <input id="payIncentive" type="number" min="0" step="1" placeholder="例：2000" />
        </div>
        <div>
          <label>燃料（経費）</label>
          <input id="costFuel" type="number" min="0" step="1" placeholder="例：2500" />
        </div>
      </div>

      <div class="grid grid3">
        <div>
          <label>高速（経費）</label>
          <input id="costToll" type="number" min="0" step="1" placeholder="例：0" />
        </div>
        <div>
          <label>駐車（経費）</label>
          <input id="costPark" type="number" min="0" step="1" placeholder="例：200" />
        </div>
        <div>
          <label>その他（経費）</label>
          <input id="costOther" type="number" min="0" step="1" placeholder="例：0" />
        </div>
      </div>

      <div class="grid grid2">
        <div>
          <label>概算利益（自動）</label>
          <input id="profit" readonly placeholder="自動" />
        </div>
        <div>
          <label>遅延理由 <span class="req">*</span></label>
          <select id="delayReason">
            <option value="">選択</option>
            <option>なし</option>
            <option>渋滞</option>
            <option>積込遅れ</option>
            <option>体調</option>
            <option>その他</option>
          </select>
        </div>
      </div>

      <div class="grid grid2">
        <div>
          <label>事故/物損 <span class="req">*</span></label>
          <select id="accident">
            <option value="">選択</option>
            <option>なし</option>
            <option>あり</option>
          </select>
        </div>
        <div>
          <label>事故/物損内容（ありの場合必須）</label>
          <input id="accidentNote" type="text" placeholder="例：軽微な擦り" />
        </div>
      </div>

      <div class="grid grid2">
        <div>
          <label>明日の稼働予定 <span class="req">*</span></label>
          <select id="tomorrowPlan">
            <option value="">選択</option>
            <option>あり</option>
            <option>なし</option>
          </select>
        </div>
        <div>
          <label>日報メモ（引継ぎ/改善）</label>
          <input id="dailyMemo" type="text" placeholder="例：再配達多いエリア注意" />
        </div>
      </div>

      <label>日報写真（任意：PDFに載せる）</label>
      <input id="dailyPhotos" type="file" accept="image/*" multiple />

      <div class="btnrow">
        <button class="btn rainbow" id="btnSubmit" type="button">送信（帰着点呼＋日報を保存）</button>
      </div>

      <div class="hint">※写真は保存しません（PDFに載せて共有する用途のみ）。月報は写真「有/無」だけ扱います。</div>
    </div>
  </div>

  <script type="module" src="./app.js"></script>
</body>
</html>
