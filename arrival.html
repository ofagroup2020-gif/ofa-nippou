<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>OFA | 帰着点呼</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
<div class="wrap">
  <div class="topbar">
    <div>
      <div class="title">業務終了（帰着点呼）</div>
      <div class="subtitle">休憩時間は必須｜点呼・点検は法令順守</div>
    </div>
    <button class="btnSmall" id="backBtn" type="button">戻る</button>
  </div>

  <div class="card rainbowBorder">
    <div class="row">
      <span class="badge"><span class="dot ng" id="dot"></span><span id="state">未ログイン</span></span>
      <span class="badge"><span class="k">ログイン</span>&nbsp;<b id="who">-</b></span>
    </div>

    <hr class="sep">

    <div class="grid2">
      <div>
        <label>点呼区分 <span class="req">*</span></label>
        <input value="帰着" readonly />
      </div>
      <div>
        <label>点呼日時（自動）</label>
        <input id="datetime" readonly />
      </div>
    </div>

    <div class="grid2">
      <div>
        <label>運転者氏名（本名） <span class="req">*</span></label>
        <input id="driverName" type="text" placeholder="例：森下 洸" />
      </div>
      <div>
        <label>拠点 <span class="req">*</span></label>
        <select id="base"></select>
      </div>
    </div>

    <div class="grid3">
      <div>
        <label>車両番号（ナンバー） <span class="req">*</span></label>
        <input id="vehicleNo" type="text" placeholder="例：鹿児島 480 れ 21-15" />
      </div>
      <div>
        <label>出発ODO <span class="req">*</span></label>
        <input id="odoStart" inputmode="numeric" placeholder="例：12345" />
      </div>
      <div>
        <label>帰着ODO <span class="req">*</span></label>
        <input id="odoEnd" inputmode="numeric" placeholder="例：12500" />
      </div>
    </div>

    <div class="grid2">
      <div>
        <label>走行距離（自動）</label>
        <input id="odoDiff" readonly placeholder="差分" />
      </div>
      <div>
        <label>点呼実施方法 <span class="req">*</span></label>
        <select id="method">
          <option value="">選択</option>
          <option>対面</option>
          <option>電話</option>
          <option>アプリ</option>
          <option>その他</option>
        </select>
      </div>
    </div>

    <hr class="sep">
    <div class="sectionTitle">健康・状態（必須）</div>

    <div class="grid3">
      <div>
        <label>体温（℃）<span class="req">*</span></label>
        <input id="temp" type="number" step="0.1" min="30" max="45" placeholder="例：36.5" />
      </div>
      <div>
        <label>体調<span class="req">*</span></label>
        <select id="condition">
          <option value="">選択</option>
          <option>良好</option>
          <option>注意</option>
          <option>不良</option>
        </select>
      </div>
      <div>
        <label>疲労<span class="req">*</span></label>
        <select id="fatigue">
          <option value="">選択</option>
          <option>なし</option>
          <option>少し</option>
          <option>強い</option>
        </select>
      </div>
    </div>

    <div class="grid3">
      <div>
        <label>服薬・体調影響<span class="req">*</span></label>
        <select id="medicineFlag">
          <option value="">選択</option>
          <option>なし</option>
          <option>あり</option>
        </select>
      </div>
      <div>
        <label>服薬内容（ありの場合必須）</label>
        <input id="medicineDetail" type="text" placeholder="例：頭痛薬" />
      </div>
      <div>
        <label>休憩時間（分）<span class="req">*</span></label>
        <input id="breakMinutes" type="number" min="0" step="1" placeholder="例：60" />
      </div>
    </div>

    <div class="grid3">
      <div>
        <label>飲酒の有無<span class="req">*</span></label>
        <select id="drinkFlag">
          <option value="">選択</option>
          <option>なし</option>
          <option>あり</option>
        </select>
      </div>
      <div>
        <label>酒気帯び有無<span class="req">*</span></label>
        <select id="alcoholJudge">
          <option value="">選択</option>
          <option>なし</option>
          <option>疑い</option>
          <option>あり</option>
        </select>
      </div>
      <div>
        <label>アルコール数値<span class="req">*</span></label>
        <input id="alcoholValue" type="number" step="0.01" min="0" placeholder="例：0.00" />
      </div>
    </div>

    <div class="grid2">
      <div>
        <label>アルコール測定写真（任意・推奨）</label>
        <input id="alcoholPhoto" type="file" accept="image/*" />
      </div>
      <div>
        <label>免許証番号（必須）<span class="req">*</span></label>
        <input id="licenseNo" type="text" placeholder="例：第1234567890号" />
      </div>
    </div>

    <label>免許証写真（任意）</label>
    <input id="licensePhoto" type="file" accept="image/*" />

    <hr class="sep">
    <div class="sectionTitle">業務（必須）</div>

    <div id="projectsBox"></div>
    <div class="btnRow">
      <button class="btn btnGhost" id="addProjectBtn" type="button">＋ 稼働案件を追加</button>
    </div>

    <div class="grid2">
      <div>
        <label>積込拠点/エリア<span class="req">*</span></label>
        <input id="loadBase" type="text" placeholder="例：Amazon鹿児島 / 姶良" />
      </div>
      <div>
        <label>危険物・高額品の有無<span class="req">*</span></label>
        <select id="dangerous">
          <option value="">選択</option>
          <option>なし</option>
          <option>あり</option>
        </select>
      </div>
    </div>

    <hr class="sep">
    <div class="sectionTitle">異常申告（必須）</div>

    <div class="grid2">
      <div>
        <label>異常の有無<span class="req">*</span></label>
        <select id="abnormalFlag">
          <option value="">選択</option>
          <option>なし</option>
          <option>あり</option>
        </select>
      </div>
      <div>
        <label>異常写真（任意・推奨）</label>
        <input id="abnormalPhotos" type="file" accept="image/*" multiple />
      </div>
    </div>
    <label>異常内容（ありの場合必須）</label>
    <textarea id="abnormalDetail" placeholder="例：体調不良、車両異常など"></textarea>

    <hr class="sep">
    <div class="sectionTitle">日常点検（フル｜必須）</div>
    <div id="inspectionBox"></div>

    <label>NG詳細メモ（NGがある場合は必須）</label>
    <textarea id="inspectionNgDetail" placeholder="NGの場合は必ず詳細"></textarea>

    <label>NG写真（NGがある場合は必須推奨）</label>
    <input id="inspectionNgPhotos" type="file" accept="image/*" multiple />

    <div class="btnRow">
      <button class="btn btnGrad" id="submitBtn" type="button">送信（帰着点呼）</button>
    </div>
    <div class="hint">※先にデータ保存→写真アップで確実に進めます。</div>
  </div>
</div>

<div id="toast" class="toast"></div>

<script type="module" src="./app-arrival.js"></script>
</body>
</html>
